<%@ page language="java" contentType="text/html; charset=UTF-8"
	pageEncoding="UTF-8"%>
	<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
	<%@ taglib prefix="fn" uri="http://java.sun.com/jsp/jstl/functions"%>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script> 
	<script type="text/javascript">
	function Login(){
		var frm = document.getElementById("frm");
		var obj = new Object(); 
		obj.loginid = frm.loginid.value;
		obj.loginpw = frm.loginpw.value;
		var jsondata = JSON.stringify(obj); 
		if(frm.loginid.value == null || frm.loginid.value == "")
			return alert("아이디 체크 또는 아이디를 입력해주세요");
		if(frm.loginpw.value == null || frm.loginpw.value == "")
			return alert("비밀번호를 입력해주세요");
		
		$.ajax({
			url: "/movie/lol/logincheck.ajax",
			type: "POST",
			dataType: "JSON",
			async:false,
			data:"ajaxdata="+jsondata,
			success: function(data, status) {
				alert(data.user);
				Link('main');
			},
			error: function (){
				alert("error");
			}
		});
	}
	function Link(input){
		var frm = document.getElementById("frm");
		var subcmd = document.getElementById("subcmd");
		var cmd = document.getElementById("cmd");
		
		cmd.value="lol"
		subcmd.value = input;
		frm.method = "post";
		frm.action = "/movie/"+cmd.value+"/"+subcmd.value+".do";
		frm.submit();
	}
	function Logout(){
		$.ajax({
			url: "/movie/lol/logoutcheck.ajax",
			type: "POST",
			dataType: "JSON",
			async:false,
			data:"ajaxdata=test",
			success: function(data, status) {
				Link('main');
			},
			error: function (){
				alert("error");
			}
		});
	}
	function SearchUser(){
		alert("guest는 여기누르지말고 검색창 쓰셔야합니다");
	}
	</script>
	<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
	<link rel="stylesheet" href="${pageContext.request.contextPath}/css/main.css" />
			<br><br>
			<c:choose>
			<c:when test='${account == "" ||  account == null}'>
			<div align="right"  style="margin-right: 15%">
			아이디<input type="text" id="loginid" name="loginid" style="width:130px; height:35px; display:inline;">&nbsp;&nbsp;&nbsp;
			비밀번호<input type="text" id="loginpw" name="loginpw" style="width:130px; height:35px;  display:inline;">&nbsp;&nbsp;&nbsp;
			<input type="button" value="로그인" onclick="javascript:Login();" style="padding: 0px 5px;">
			<input type="button" value="회원가입" onclick="javascript:Link('register');" style="padding: 0px 5px;">
			</div>
			</c:when>
			<c:otherwise>
			<div align="right"  style="margin-right: 15%">
			${account} 님 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			<input type="button" value="로그아웃" onclick="javascript:Logout();" style="padding: 0px 5px;">
			</div>
			</c:otherwise>
			</c:choose>
			<!-- Header -->
				<div id="header-wrapper">
					<header id="header" class="container">
						<!-- Logo -->
							<div id="logo">
								<h1><a href="javascript:Link('main');">LOL.GG</a></h1>
								<span>by 최준혁</span>
							</div>

						<!-- Nav -->
							<nav id="nav">
								<ul>
									<li id="homeLi"><a href="javascript:Link('main');">홈</a></li>
									<li id="champLi"><a href="javascript:Link('championinfo');">챔피언 정보</a></li>
									<li id="matchLi"><a href="javascript:void(0);" onclick="javacript:SearchUser();">전적 정보</a></li>
									<li id="boardLi"><a href="javascript:Link('board');">자유 게시판</a></li>
								</ul>
							</nav>
					</header>
				</div>