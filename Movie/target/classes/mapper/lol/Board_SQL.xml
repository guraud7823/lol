<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="board">
<select id="insertBoard" parameterType="hashmap">
	insert into freeboard (id, regdt, moddt, title, content)
	values(#{id},now(),null,#{title},#{content})
</select>
<select id="selectBoardList" parameterType="hashmap" resultType="hashmap">
	select *
	from freeboard
	<choose>
	<when test='selectInfo == "id"'>
        where id LIKE  CONCAT('%',#{searchvalue},'%')
    </when>
    <when test='selectInfo == "content"'>
        where content LIKE  CONCAT('%',#{searchvalue},'%')
        or  title  LIKE  CONCAT('%',#{searchvalue},'%')
    </when>
    <when test='selectInfo == "title"'>
        where title LIKE  CONCAT('%',#{searchvalue},'%')
    </when>
    <when test='selectInfo == "all"'>
        where title LIKE  CONCAT('%',#{searchvalue},'%')
        or content LIKE  CONCAT('%',#{searchvalue},'%')
        or id LIKE  CONCAT('%',#{searchvalue},'%')
    </when>
    <otherwise>
    </otherwise>
    </choose>
    order by bo_no desc
    limit #{startcell},#{cell}
</select>
<select id="selectBoardListAll" resultType="hashmap">
<![CDATA[
	select *
	from freeboard;
	order by bo_no desc;
]]>
</select>
<select id="deleteBoard" parameterType="hashmap">
	delete from freeboard
	where bo_no = #{boNo};
</select>
<select id="updateBoard" parameterType="hashmap">
	update freeboard
	set title = #{title}, content = #{content}, moddt = now()
	where bo_no = #{boNo};
</select>
<select id="countboard" parameterType="hashmap" resultType="int">
	select count(*)
	from freeboard
	<choose>
	<when test='selectInfo == "id"'>
        where id LIKE  CONCAT('%',#{searchvalue},'%')
    </when>
    <when test='selectInfo == "content"'>
        where content LIKE  CONCAT('%',#{searchvalue},'%')
        or  title  LIKE  CONCAT('%',#{searchvalue},'%')
    </when>
    <when test='selectInfo == "title"'>
        where title LIKE  CONCAT('%',#{searchvalue},'%')
    </when>
    <when test='selectInfo == "all"'>
        where title LIKE  CONCAT('%',#{searchvalue},'%')
        or content LIKE  CONCAT('%',#{searchvalue},'%')
        or id LIKE  CONCAT('%',#{searchvalue},'%')
    </when>
    <otherwise>
    </otherwise>
    </choose>
</select>
<select id="selectBoardDetail" parameterType="hashmap" resultType="hashmap">
	select *
	from freeboard
	where bo_no = #{boNo}
</select>
</mapper>